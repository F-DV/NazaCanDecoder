## Описание модуля
Проект модуля Python3 - дешифратора CAN сообщений от полетного контроллера Naza M v2.  
Основан на [данном решении](https://www.rcgroups.com/forums/showthread.php?2071772-DJI-NAZA-Phantom-A2-CAN-bus-communication-protocol-NazaCanDecoder-Arduino-library).  
Модуль предназначен **только** для чтения данных с полетного контроллера.

## Начало работы
Для того чтобы начать работать с данным модулем неободимо его скомпилировать:  
`sudo python3 setup.py build`  
после этого модуль можно подключать к проекту локально (не проверялось).
Чтобы иметь возможность подключать модуль глобально, его необходимо установить:  
`sudo python3 setup.py install`  
После этого библиотека устанавливается в папку (на Ubuntu Linux) `/usr/local/lib/python3.5/dist-packages/`.
Чтобы удалить модуль необходимо удалить файлы с соответствующими названиями из папки выше.

## Описание класса и методов
Для того чтобы начать работу, необходимо создать объект класса `NazaCanDecoder.Decoder()`.  
Служебные методы класса:  
- `Begin("can0")` - метод, запускающий потоки, получающие сообщения из сети *can*, а также декодирующие и преобразующие 
полученные сообщения. Аргумент - название интерфейса, из которого необходимо получать сообщения. Если такого интерфейса
нет, или он неактивен, метод вернет ошибку.
- `Stop` - метод останавливающий потоки. Необходим для корректного завершения приложения.  

Остальные методы используются для получения различной информации от полетного контроллера.  
Не требующие подключения к GPS (в скобках даны единицы измерения или описание возвращаемого значения):  
- `GetAltitude` - высота, согласно барометру (метры)
- `GetVsi` - скорость набора высоты, согласно барометру (метры в секунду)
- `GetPitch` - угол тангажа (градусы)
- `GetRoll` - угол крена (градусы)
- `GetBattery` - напряжение аккумулятора (миллиВольты)
- `GetMode` - режим полета (0 - Manual, 1 - GPS, 2 - Failsafe, 3 - Atti)
- `GetHeading` - курс, с компенсацией от магнетометра (?) (градусы)
- `GetMotorOut(number)` - значение подаваемое на мотор (0 - не используется, иначе 16920~35000, 16920 = мотор выкл),
аргумент - номер мотора. Предлагаемые обозначения: 0 - M1, 1 - M2, 2 - M3, 3 - M4, 4 - M5, 5 - M6, 6 - F1, 7 - F2.
- `GetRcIn(number)` - значение получаемое от джойстика для каждого канала (-1000~1000). Предлагаемые обозначения:
0 - не исп., 1 - Rc_A (aileron), 2 - Rc_E (elevator), 3 - Rc_R (rudder), 4 - Rc_U, 5 - Rc_T (throttle), 6 - не исп.,
7 - Rc_X1, 8 - Rc_X2, 9 - не исп.

Требующие подключения к GPS:
- `GetAltitudeGps` - высота, согласно GPS (метры)
- `GetLatitude` - широта (градусы)
- `GetLongitude` - долгота (градусы)
- `GetHeadingNc` - курс без компенсации от магнетометра (?, т.к. магнетометр вынесен на блок с GPS) (градусы)
- `GetSpeed` - скорость (метры в секунду)
- `GetFixType` - тип фиксации (0 - нет фиксации, 2 - 2D, 3 - 3D, 4 - DPGS)
- `GetNumSat` - кол-во найденных спутников
- `GetCog` - курс над землей, относительно сторон света (градусы)
- `GetVsiGps` - скорость набора высоты, согласно GPS (метры в секунду)
- `GetHdop` - горизонтальный DOP (dilution of precision, подробнее см. uBlox NAV-DOP messages)
- `GetVdop` - вертикальный DOP
- `GetYear` - год
- `GetMonth` - месяц
- `GetDay` - число
- `GetHour` - часы (для времени от 16:00 до 23:59 GPS возвращает 0:00 - 7:59)
- `GetMinute` - минуты
- `GetSecond` - секунды  
**Важно:** GPS возвращает время в часовом поясе UTC (гринвич).